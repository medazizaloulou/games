<!DOCTYPE html>
<html lang="ar">
<head>
<meta charset="UTF-8">
<title>Neon Pro Clicker - Enhanced</title>
<style>
body{
  margin:0; padding:0;
  font-family:'Arial',sans-serif;
  background:#0a0a0f; color:#0ff;
  text-align:center; overflow:hidden;
}
#bgCanvas{
  position:fixed; top:0; left:0;
  width:100%; height:100%; z-index:-1;
}

/* Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© */
#mainMenu{
  position:absolute; top:0; left:0;
  width:100%; height:100%;
  display:flex; flex-direction:column;
  align-items:center; justify-content:center;
  background:rgba(0,0,0,0.5);
}
#mainMenu h1{
  font-size:50px; text-shadow:0 0 10px #0ff,0 0 20px #0ff;
  margin-bottom:40px;
}
#mainMenu button{
  padding:15px 30px; margin:10px;
  font-size:18px; border:none; border-radius:10px;
  cursor:pointer; color:#0ff; background:#111;
  text-shadow:0 0 5px #0ff; box-shadow:0 0 15px #0ff; transition:0.2s;
}
#mainMenu button:hover{
  box-shadow:0 0 30px #0ff; text-shadow:0 0 15px #0ff;
}

/* ØµÙØ­Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© */
#gameScreen{ display:none; padding-top:120px; }
.header{
  position:fixed; top:0; width:100%;
  background:#05050a; padding:12px 0;
  box-shadow:0 0 20px #0ff; z-index:100;
}
.header-row{
  display:flex; justify-content:space-around;
  align-items:center; font-size:14px;
  color:#0ff; text-shadow:0 0 5px #0ff; flex-wrap:wrap;
}
.rank{
  padding:5px 12px; border-radius:20px;
  font-size:13px; font-weight:bold; text-shadow:0 0 8px #0ff;
}
.progress{ width:80%; height:12px; background:#111;
  margin:8px auto 0; border-radius:10px;
  box-shadow:0 0 10px #0ff inset;
}
.progress-bar{
  height:100%; width:0%; background:#0ff;
  border-radius:10px; box-shadow:0 0 15px #0ff;
  transition:width 0.3s;
}
button.gameBtn{
  padding:10px 20px; margin:5px; font-size:14px;
  border:none; border-radius:8px; cursor:pointer;
  text-shadow:0 0 5px #0ff; box-shadow:0 0 10px #0ff;
  background:#111; color:#0ff; transition:0.2s;
}
button.gameBtn:hover{
  box-shadow:0 0 20px #0ff; text-shadow:0 0 10px #0ff;
}
#box{
  position:absolute; display:none; border-radius:10px;
  cursor:pointer; transition:0.1s; touch-action: manipulation;
}
#box:active{ transform: scale(0.9); filter: drop-shadow(0 0 25px #0ff); }
#box.trail::after{
  content:""; position:absolute; width:100%; height:100%;
  border-radius:10px;
  box-shadow:0 0 30px #0ff, 0 0 50px #0ff inset;
  animation: fadeTrail 0.5s forwards;
}
@keyframes fadeTrail{0%{opacity:1; transform:scale(1);} 100%{opacity:0; transform:scale(1.5);}}

#score, #timer{ font-size:20px; text-shadow:0 0 8px #0ff; transition:0.2s;}
#score.flash{ animation: flash 0.3s ease-in-out;}
@keyframes flash{
0%{text-shadow:0 0 5px #0ff,0 0 10px #0ff; color:#0ff;}
50%{text-shadow:0 0 20px #ff0,0 0 40px #ff0; color:#ff0;}
100%{text-shadow:0 0 8px #0ff,0 0 15px #0ff; color:#0ff;}
}

/* ÙÙ‚Ø§Ø¹Ø§Øª Ø§Ù„Ù†Ù‚Ø§Ø· */
.pointBubble{
  position:absolute; font-size:18px; font-weight:bold; color:#ff0;
  text-shadow:0 0 10px #ff0; pointer-events:none;
  animation: bubbleRise 1s forwards;
}
@keyframes bubbleRise{
  0%{opacity:1; transform:translateY(0);}
  100%{opacity:0; transform:translateY(-50px);}
}

@media (max-width:600px){
  #box{ min-width:30px; min-height:30px; }
  #score, #timer{ font-size:18px; }
  button.gameBtn{ padding:8px 16px; font-size:12px; }
  .header-row{ flex-direction:column; gap:5px; }
}
</style>
</head>
<body>

<canvas id="bgCanvas"></canvas>

<!-- Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
<div id="mainMenu">
  <h1>ğŸ® Neon Pro Clicker</h1>
  <button onclick="startGameFromMenu()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù„Ø¹Ø¨Ø©</button>
  <button onclick="showStats()">Ø§Ù„Ù…Ø³ØªÙˆÙŠØ§Øª ÙˆØ§Ù„Ù†Ù‚Ø§Ø·</button>
</div>

<!-- ØµÙØ­Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© -->
<div id="gameScreen">
  <div class="header">
    <div class="header-row">
      <div>Level: <span id="level">1</span></div>
      <div>Coins: <span id="coins">0</span></div>
      <div id="rank" class="rank">Ù…Ø¨ØªØ¯Ø¦</div>
    </div>
    <div class="progress"><div id="xpBar" class="progress-bar"></div></div>
  </div>
  <h2>ğŸ® Neon Pro Clicker</h2>
  <p id="score">Ø§Ù„Ù†Ù‚Ø§Ø·: 0</p>
  <p id="timer">Ø§Ù„ÙˆÙ‚Øª: 30</p>
  <button class="gameBtn" onclick="startGame()">Ø§Ø¨Ø¯Ø£</button>
  <button class="gameBtn" onclick="stopGame()">Ø¥ÙŠÙ‚Ø§Ù</button>
  <div id="box"></div>
</div>

<script>
// ===== Canvas Background =====
const canvas=document.getElementById("bgCanvas");
const ctx=canvas.getContext("2d");
canvas.width=window.innerWidth; canvas.height=window.innerHeight;
window.addEventListener("resize",()=>{canvas.width=window.innerWidth; canvas.height=window.innerHeight;});

let lines=[]; for(let i=0;i<50;i++){
  lines.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,len:Math.random()*100+50,speed:Math.random()*1+0.5,color:`hsl(${Math.random()*360},100%,50%)`});
}
function animateLines(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  lines.forEach(line=>{
    ctx.strokeStyle=line.color; ctx.lineWidth=2;
    ctx.beginPath(); ctx.moveTo(line.x,line.y);
    ctx.lineTo(line.x,line.y+line.len); ctx.stroke();
    line.y+=line.speed;
    if(line.y>canvas.height){line.y=-line.len; line.x=Math.random()*canvas.width;}
  });
  requestAnimationFrame(animateLines);
}
animateLines();

// ===== Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù„Ø§Ø¹Ø¨ =====
let level=parseInt(localStorage.getItem("level"))||1;
let xp=parseInt(localStorage.getItem("xp"))||0;
let coins=parseInt(localStorage.getItem("coins"))||0;
let rank="";

// ===== Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù„Ø¹Ø¨Ø© =====
let score=0,timeLeft=30,gameRunning=false,timerInterval,boxTimeout,comboCount=0;

// ===== Ø¹Ù†Ø§ØµØ± DOM =====
let box=document.getElementById("box");
let scoreEl=document.getElementById("score");

// ===== ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… =====
function updateUI(){
  document.getElementById("level").innerText=level;
  document.getElementById("coins").innerText=coins;
  document.getElementById("xpBar").style.width=(xp/(level*100)*100)+"%";
  updateRank();
}
function updateRank(){
  let rankEl=document.getElementById("rank");
  let color="#0ff";
  if(level>=50){rank="ğŸ‘‘ Ù…Ù„Ùƒ Ø§Ù„Ø³Ø±Ø¹Ø©";color="gold";rankEl.style.background="linear-gradient(45deg, gold, orange)";}
  else if(level>=35){rank="ğŸ”´ Ø£Ø³Ø·ÙˆØ±Ø©";color="#ff0033";rankEl.style.background=color;}
  else if(level>=20){rank="ğŸŸ¡ Ø®Ø¨ÙŠØ±";color="#ffcc00";rankEl.style.background=color;}
  else if(level>=10){rank="ğŸŸ£ Ù…Ø­ØªØ±Ù";color="#9900ff";rankEl.style.background=color;}
  else if(level>=5){rank="ğŸ”µ Ù„Ø§Ø¹Ø¨";color="#00ccff";rankEl.style.background=color;}
  else{rank="ğŸŸ¢ Ù…Ø¨ØªØ¯Ø¦";color="#00ff66";rankEl.style.background=color; rankEl.style.color="#000";}
  rankEl.innerText=rank;
  box.style.boxShadow=`0 0 25px ${color},0 0 50px ${color}`;
}

// ===== ØªØ´ØºÙŠÙ„ Ø§Ù„Ù„Ø¹Ø¨Ø© Ù…Ù† Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© =====
function startGameFromMenu(){
  document.getElementById("mainMenu").style.display="none";
  document.getElementById("gameScreen").style.display="block";
  startGame();
}

// ===== ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù„Ø¹Ø¨Ø© =====
function startGame(){
  if(gameRunning) return;
  score=0; timeLeft=30; gameRunning=true; comboCount=0;
  scoreEl.innerText="Ø§Ù„Ù†Ù‚Ø§Ø·: 0";
  document.getElementById("timer").innerText="Ø§Ù„ÙˆÙ‚Øª: 30";
  timerInterval=setInterval(()=>{
    timeLeft--; document.getElementById("timer").innerText="Ø§Ù„ÙˆÙ‚Øª: "+timeLeft;
    if(timeLeft<=0) endGame();
  },1000);
  showBox();
}
function stopGame(){ if(!gameRunning) return; gameRunning=false;
  clearInterval(timerInterval); clearTimeout(boxTimeout); box.style.display="none";
}
function showBox(){
  if(!gameRunning) return;
  let size=Math.random()*40+40; if(window.innerWidth<400) size=Math.random()*30+30;
  let headerHeight=document.querySelector('.header').offsetHeight;
  let maxX=window.innerWidth-size; let maxY=window.innerHeight-size-headerHeight;
  box.style.width=size+"px"; box.style.height=size+"px";
  box.style.left=Math.random()*maxX+"px"; box.style.top=headerHeight+Math.random()*maxY+"px";
  box.style.background=getRandomColor(); box.style.display="block";
  box.classList.remove("trail"); void box.offsetWidth; box.classList.add("trail");
  let speed=2000-(level*50); if(speed<500) speed=500;
  boxTimeout=setTimeout(()=>{box.style.display="none"; showBox();},speed);
}

// ===== ÙÙ‚Ø§Ø¹Ø§Øª Ø§Ù„Ù†Ù‚Ø§Ø· =====
function showPointBubble(text,x,y){
  const bubble=document.createElement("div");
  bubble.className="pointBubble"; bubble.style.left=x+"px"; bubble.style.top=y+"px";
  bubble.innerText=text; document.body.appendChild(bubble);
  setTimeout(()=>{document.body.removeChild(bubble);},1000);
}

// ===== Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø±Ø¨Ø¹ =====
box.onclick=box.ontouchstart=function(e){
  if(!gameRunning) return;
  score++; scoreEl.innerText="Ø§Ù„Ù†Ù‚Ø§Ø·: "+score;
  scoreEl.classList.remove("flash"); void scoreEl.offsetWidth; scoreEl.classList.add("flash");

  // ÙÙ‚Ø§Ø¹Ø§Øª Ø§Ù„Ù†Ù‚Ø§Ø· Ø¹Ù†Ø¯ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù†Ù‚Ø±
  let rect=box.getBoundingClientRect();
  showPointBubble("+1", rect.left+rect.width/2, rect.top);

  comboCount++;
  if(comboCount>=5){
    box.style.transform="scale(1.3)";
    box.style.boxShadow="0 0 50px #ff0,0 0 80px #ff0";
    showPointBubble("Combo!", rect.left+rect.width/2, rect.top-30);
    setTimeout(()=>{box.style.transform="scale(1)"; updateRank();},200);
    comboCount=0;
  }

  box.style.display="none"; clearTimeout(boxTimeout); showBox();

  // Ø£ØµÙˆØ§Øª Ù†Ù‚Ø± Ø®ÙÙŠÙØ©
  let audio=new Audio('https://freesound.org/data/previews/256/256113_3263906-lq.mp3');
  audio.volume=0.3; audio.play();
}

// ===== Ø¥Ù†Ù‡Ø§Ø¡ Ø§Ù„Ù„Ø¹Ø¨Ø© =====
function endGame(){
  gameRunning=false; clearInterval(timerInterval); clearTimeout(boxTimeout);
  box.style.display="none"; let earnedXP=score*5; let earnedCoins=score*2;
  xp+=earnedXP; coins+=earnedCoins;
  while(xp>=level*100){ xp-=level*100; level++; }
  localStorage.setItem("level",level); localStorage.setItem("xp",xp); localStorage.setItem("coins",coins);
  updateUI();
}

// ===== ÙˆØ¸Ø§Ø¦Ù Ù…Ø³Ø§Ø¹Ø¯Ø© =====
function getRandomColor(){ let letters="0123456789ABCDEF"; let color="#";
  for(let i=0;i<6;i++){ color+=letters[Math.floor(Math.random()*16)]; } return color;
}
function showStats(){
  let level=localStorage.getItem("level")||1;
  let coins=localStorage.getItem("coins")||0;
  let xp=localStorage.getItem("xp")||0;
  alert(`Ø§Ù„Ù…Ø³ØªÙˆÙ‰: ${level}\nØ§Ù„Ù†Ù‚Ø§Ø·: ${xp}\nØ§Ù„Ø¹Ù…Ù„Ø§Øª: ${coins}`);
}
updateUI();
</script>
</body>
</html>
